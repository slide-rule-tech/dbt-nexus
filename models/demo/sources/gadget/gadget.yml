version: 2

sources:
  - name: gadget
    database: sliderule-analytics
    schema: gadget
    tables:
      - name: shopify_shops
      - name: google_connections
      - name: google_analytics_connections

models:
  - name: gadget_shops_base
    description:
      "Base model for Gadget Shopify shops with extracted and standardized
      fields"
    config:
      materialized: table
      tags: ["event-processing"]
    columns:
      - name: event_id
        description: "Unique identifier for each shop event"
        tests:
          - unique
          - not_null
      - name: shop_id
        description: "Shopify shop ID"
      - name: shop_name
        description: "Shop name"
      - name: occurred_at
        description: "When the shop event occurred"

  - name: gadget_events
    description: "Gadget shop events"
    config:
      materialized: table
      tags: ["event-processing"]

  - name: gadget_group_identifiers
    description: "Group identifiers extracted from Gadget data"
    config:
      materialized: table
      tags: ["identity-resolution", "event-processing", "groups"]

  - name: gadget_group_traits
    description: "Group traits extracted from Gadget data"
    config:
      materialized: table
      tags: ["identity-resolution", "event-processing", "groups"]

  - name: gadget_membership_identifiers
    description: "Membership relationships between persons and groups in Gadget"
    config:
      materialized: table
      tags: ["identity-resolution", "event-processing", "memberships"]

  - name: gadget_person_identifiers
    description: "Person identifiers extracted from Gadget data"
    config:
      materialized: table
      tags: ["identity-resolution", "event-processing", "groups"]

  - name: gadget_person_traits
    description: "Person traits extracted from Gadget data"
    config:
      materialized: table
      tags: ["identity-resolution", "event-processing", "groups"]
